<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manufacturing Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

    <nav class="navbar no-print">
        <div class="nav-content">
            <div style="display: flex; align-items: center; gap: 15px;">
                <button class="menu-toggle" onclick="toggleSidebar()">☰</button>
                <div class="brand">
                    PLANTABLES.store <span>Manufacturing Hub</span>
                </div>
            </div>
            <div class="nav-right">
                <div id="connectionStatus" style="font-size: 10px; font-weight: 600;">● Connecting...</div>
                <div class="nav-deadline-box" id="navDeadline">No active deadline</div>
            </div>
        </div>
    </nav>

    <div class="layout">
        <aside class="sidebar no-print" id="sidebar">
            <div class="sidebar-header">
                <h2 style="font-size: 14px;">Products</h2>
                <button class="add-btn-small" onclick="showForm()">+ New</button>
            </div>

            <div class="search-filter-group">
                <input type="text" id="searchInput" placeholder="Search product or company..." oninput="filterProducts()">
                <select id="statusFilter" onchange="filterProducts()">
                    <option value="all">All Status</option>
                    <option value="active">Active</option>
                    <option value="urgent">Urgent</option>
                    <option value="completed">Completed</option>
                </select>
            </div>

            <ul class="product-menu" id="productList">
                </ul>
        </aside>

        <main class="container">
            <div id="dashboard">
                <div class="product-hero">
                    <div class="hero-details">
                        <span id="dStatusBadge" class="badge">Active</span>
                        <h1 id="dName">Loading...</h1>
                        <p id="dCompany" style="color: var(--text-muted); font-size: 14px;"></p>
                    </div>
                    <div class="hero-actions no-print">
                        <button class="btn-secondary" onclick="initEditCurrent()">Edit Details</button>
                        <button class="btn-primary" onclick="exportToPDF()">Export PDF</button>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="left-col">
                        <div class="card">
                            <h3>Product Information</h3>
                            <div class="spec-list">
                                <div class="spec-item"><span class="label">Customer</span><span class="val" id="dCustomer">-</span></div>
                                <div class="spec-item"><span class="label">Salesperson</span><span class="val" id="dSalesperson">-</span></div>
                                <div class="spec-item"><span class="label">Lead Designer</span><span class="val" id="dDesigner">-</span></div>
                                <div class="spec-item"><span class="label">Order Date</span><span class="val" id="dOrderDate">-</span></div>
                                <div class="spec-item"><span class="label">Deadline</span><span class="val" id="dDeadline" style="color: var(--urgent);">-</span></div>
                            </div>
                            <div class="image-container">
                                <img id="dImage" src="" alt="Product Preview">
                            </div>
                        </div>
                    </div>

                    <div class="right-col">
                        <div class="card">
                            <h3>Production Progress</h3>
                            <div class="metric-row">
                                <div class="metric-box"><span class="m-label">Total Qty</span><span class="m-val" id="dQty">0</span></div>
                                <div class="metric-box"><span class="m-label">Completed</span><span class="m-val" id="completed">0</span></div>
                                <div class="metric-box"><span class="m-label">Remaining</span><span class="m-val" id="leftUnits">0</span></div>
                                <div class="metric-box"><span class="m-label">Efficiency</span><span class="m-val" id="percent">0%</span></div>
                            </div>
                            <div class="progress-bar">
                                <div id="prodFill" class="progress-fill" style="width: 0%">0%</div>
                            </div>
                            
                            <div class="production-input-group no-print">
                                <input type="number" id="todayQty" placeholder="Enter units produced today...">
                                <button onclick="addProduction()">Update</button>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Workflow / SOP Steps</h3>
                            <div class="progress-bar-thin">
                                <div id="processFill" class="progress-fill" style="width: 0%; background: var(--completed);"></div>
                            </div>
                            <div id="sopSteps">
                                </div>
                            <div class="add-step-tool no-print">
                                <input type="text" id="newStepName" placeholder="Add custom step...">
                                <button onclick="addNewStep()">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="productForm" style="display: none;">
                <div class="card form-card">
                    <h2 id="formTitle" style="margin-bottom: 20px;">Add New Product</h2>
                    <input type="hidden" id="editProductId">
                    
                    <div class="form-grid">
                        <div class="form-group full">
                            <label>Product Name</label>
                            <input type="text" id="pName" placeholder="e.g. Eco-Friendly Packaging Box">
                        </div>
                        <div class="form-group">
                            <label>Company Name</label>
                            <input type="text" id="pCompany" placeholder="Client Company">
                        </div>
                        <div class="form-group">
                            <label>Customer Name</label>
                            <input type="text" id="pCustomer" placeholder="Contact Person">
                        </div>
                        <div class="form-group">
                            <label>Salesperson</label>
                            <input type="text" id="pSalesperson">
                        </div>
                        <div class="form-group">
                            <label>Designer</label>
                            <input type="text" id="pDesigner">
                        </div>
                        <div class="form-group">
                            <label>Total Quantity</label>
                            <input type="number" id="pQty">
                        </div>
                        <div class="form-group">
                            <label>Order Date</label>
                            <input type="date" id="pOrderDate">
                        </div>
                        <div class="form-group">
                            <label>Deadline</label>
                            <input type="date" id="pDeadline">
                        </div>
                        <div class="form-group full">
                            <label>Product Image</label>
                            <input type="file" accept="image/*" onchange="loadImage(event)">
                            <img id="preview" style="max-width: 100px; margin-top: 10px; border-radius: 5px;">
                        </div>
                    </div>

                    <div class="form-footer">
                        <button class="btn-cancel" onclick="hideForm()">Cancel</button>
                        <button class="btn-primary" id="saveBtn" onclick="saveProductAction()">Save Product</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>

